<?xml version="1.0"?>
<robot xmlns:xacro="http://ros.org/wiki/xacro">

<!--
  Author: Kelsey Hawkins
  Contributers: Jimmy Da Silva, Ajit Krisshna N L, Muhammad Asif Rana
  Nuno Pereira!!!
-->

  <!-- <xacro:include filename="$(find ur_description)/urdf/ur.transmission.xacro" />
  <xacro:include filename="$(find ur_description)/urdf/ur.gazebo.xacro" /> -->

  <xacro:macro name="cylinder_inertial" params="radius length mass *origin">
    <inertial>
      <mass value="${mass}" />
      <xacro:insert_block name="origin" />
      <inertia ixx="${0.0833333 * mass * (3 * radius * radius + length * length)}" ixy="0.0" ixz="0.0"
        iyy="${0.0833333 * mass * (3 * radius * radius + length * length)}" iyz="0.0"
        izz="${0.5 * mass * radius * radius}" />
    </inertial>
  </xacro:macro>

  <xacro:macro name="ur10_robot" params="prefix joint_limited
		 shoulder_pan_lower_limit:=${-pi}    shoulder_pan_upper_limit:=${pi}
		 shoulder_lift_lower_limit:=${-pi}    shoulder_lift_upper_limit:=${pi}
		 elbow_joint_lower_limit:=${-pi}    elbow_joint_upper_limit:=${pi}
		 wrist_1_lower_limit:=${-pi}    wrist_1_upper_limit:=${pi}
		 wrist_2_lower_limit:=${-pi}    wrist_2_upper_limit:=${pi}
		 wrist_3_lower_limit:=${-pi}    wrist_3_upper_limit:=${pi}
     wrist_3_lower_limit:=${-pi}    wrist_3_upper_limit:=${pi}
     hand_lower_limit:=${-pi}    hand_upper_limit:=${pi}
     ">

     <!-- shoulder_pan_lower_limit:=${-pi}    shoulder_pan_upper_limit:=${pi}
    shoulder_lift_lower_limit:=${-pi}    shoulder_lift_upper_limit:=${pi}
    elbow_joint_lower_limit:=${-pi}    elbow_joint_upper_limit:=${pi}
    wrist_1_lower_limit:=${-pi}    wrist_1_upper_limit:=${pi}
    wrist_2_lower_limit:=${-pi}    wrist_2_upper_limit:=${pi}
    wrist_3_lower_limit:=${-pi}    wrist_3_upper_limit:=${pi}
     wrist_3_lower_limit:=${-pi}    wrist_3_upper_limit:=${pi}
     hand_lower_limit:=${-pi}    hand_upper_limit:=${pi} -->

     <!-- arm_elbow_lower_limit:=${-pi}    arm_elbow_upper_limit:=${pi}
     arm_forearm_lower_limit:=${-pi}    arm_forearm_upper_limit:=${pi}
     arm_wrist_lower_limit:=${-pi}    arm_wrist_upper_limit:=${pi} -->
     <!-- arm_elbow_lower_limit:=${-pi}    arm_elbow_upper_limit:=${pi} -->

     <!-- forearm_lower_limit:=${-pi}    forearm_upper_limit:=${pi} -->

    <!-- Inertia parameters -->
    <!-- This mass might be incorrect -->
    <!-- <xacro:property name="base_mass" value="4.0" />
    <xacro:property name="shoulder_mass" value="7.778" />
    <xacro:property name="upper_arm_mass" value="12.93" />
    <xacro:property name="forearm_mass" value="3.87" />
    <xacro:property name="wrist_1_mass" value="1.96" />
    <xacro:property name="wrist_2_mass" value="1.96" />
    <xacro:property name="wrist_3_mass" value="0.202" /> -->

    <!-- These parameters are borrowed from the urcontrol.conf file
        but are not verified for the correct permutation.
        The permutation was guessed by looking at the UR5 parameters.
        Serious use of these parameters needs further inspection. -->
    <!-- <xacro:property name="shoulder_cog" value="0.00008 0.00244 -0.037" />
    <xacro:property name="upper_arm_cog" value="0.00001 0.15061 0.38757" />
    <xacro:property name="forearm_cog" value="-0.00012 0.06112 0.1984" />
    <xacro:property name="wrist_1_cog" value="-0.00021 -0.00112 0.02269" />
    <xacro:property name="wrist_2_cog" value="-0.00021 0.00112 0.002269" />
    <xacro:property name="wrist_3_cog" value="0 -0.001156 -0.00149" /> -->

    <!-- Kinematic model -->
    <!-- Properties from urcontrol.conf -->
    <!-- <xacro:property name="d1" value="0.1273" />
    <xacro:property name="a2" value="-0.612" />
    <xacro:property name="a3" value="-0.5723" />
    <xacro:property name="d4" value="0.163941" />
    <xacro:property name="d5" value="0.1157" />
    <xacro:property name="d6" value="0.0922" /> -->

    <!-- Arbitrary offsets for shoulder/elbow joints -->
    <!-- <xacro:property name="shoulder_offset" value="0.220941" />   -->
    <!-- <xacro:property name="elbow_offset" value="-0.1719" />  -->

    <!-- link lengths used in model -->
    <!-- <xacro:property name="shoulder_height" value="${0.1273}" /> -->
    <!-- <xacro:property name="upper_arm_length" value="${0.612}" /> -->
    <!-- <xacro:property name="forearm_length" value="${0.5723}" /> -->
    <!-- <xacro:property name="wrist_1_length" value="${0.163941 + 0.1719 - 0.220941}" /> = 0.1149 -->
    <!-- <xacro:property name="wrist_2_length" value="${0.1157}" /> -->
    <!-- <xacro:property name="wrist_3_length" value="${0.0922}" /> -->

    <link name="base_link" >
      <visual>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/visual/base.dae"/>
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/collision/base.stl"/>
        </geometry>
      </collision>
      <xacro:cylinder_inertial radius="0.075" length="0.038" mass="4.0">
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      </xacro:cylinder_inertial>
    </link>

    <joint name="shoulder_pan_joint" type="revolute">
      <parent link="base_link" />
      <child link = "shoulder_link" />
      <origin xyz="0.0 0.0 0.1273" rpy="0.0 0.0 0.0" />
      <axis xyz="0 0 1" />
      <limit lower="0" upper="1.5070796" effort="330.0" velocity="2.16"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="shoulder_link">
      <visual>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/visual/shoulder.dae"/>
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/collision/shoulder.stl"/>
        </geometry>
      </collision>
      <xacro:cylinder_inertial radius="0.075" length="0.178" mass="7.778">
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      </xacro:cylinder_inertial>
    </link>

    <joint name="shoulder_lift_joint" type="revolute">
      <parent link="shoulder_link" />
      <child link = "upper_arm_link" />
      <origin xyz="0.0 0.220941 0.0" rpy="0.0 ${pi / 2.0} 0.0" />
      <axis xyz="0 1 0" />
      <!-- <limit lower="${-2.0 * pi}" upper="${2.0 * pi}" effort="330.0" velocity="2.16"/> -->
      <limit lower="-3.14159265" upper="0" effort="330.0" velocity="2.16"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="upper_arm_link">
      <visual>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/visual/upperarm.dae"/>
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/collision/upperarm.stl"/>
        </geometry>
      </collision>
      <xacro:cylinder_inertial radius="0.075" length="${0.612}" mass="12.93">
        <origin xyz="0.0 0.0 ${0.612/2.0}" rpy="0 0 0" />
      </xacro:cylinder_inertial>
    </link>

    <joint name="elbow_joint" type="revolute">
      <parent link="upper_arm_link" />
      <child link = "forearm_link" />
      <origin xyz="0.0 -0.1719 0.612" rpy="0.0 0.0 0.0" />
      <axis xyz="0 1 0" />
      <!-- <limit lower="${-pi}" upper="${pi}" effort="150.0" velocity="3.15"/> -->
      <limit lower="0" upper="3.14159265" effort="150.0" velocity="3.15"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="forearm_link">
      <visual>
         <geometry>
          <mesh filename="package://ur_description/meshes/ur10/visual/forearm.dae"/>
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/collision/forearm.stl"/>
        </geometry>
      </collision>
      <xacro:cylinder_inertial radius="0.075" length="0.5723" mass="3.87">
        <origin xyz="0.0 0.0 ${0.5723/2.0}" rpy="0 0 0" />
      </xacro:cylinder_inertial>
    </link>

    <joint name="wrist_1_joint" type="revolute">
      <parent link="forearm_link" />
      <child link = "wrist_1_link" />
      <origin xyz="0.0 0.0 0.5723" rpy="0.0 ${pi/2.0} 0.0" />
      <axis xyz="0 1 0" />
      <!-- <limit lower="${-2.0 * pi}" upper="${2.0 * pi}" effort="54.0" velocity="3.2"/> -->
      <limit lower="-3.14159265" upper="0" effort="54.0" velocity="3.2"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="wrist_1_link">
      <visual>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/visual/wrist1.dae"/>
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/collision/wrist1.stl"/>
        </geometry>
      </collision>
      <xacro:cylinder_inertial radius="0.075" length="0.12" mass="1.96">
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      </xacro:cylinder_inertial>
    </link>

    <joint name="wrist_2_joint" type="revolute">
      <parent link="wrist_1_link" />
      <child link = "wrist_2_link" />
      <origin xyz="0.0 0.1149 0.0" rpy="0.0 0.0 0.0" />
      <axis xyz="0 0 1" />
      <!-- <limit lower="${-2.0 * pi}" upper="${2.0 * pi}" effort="54.0" velocity="3.2"/> -->
      <limit lower="-3.14159265" upper="0.785398" effort="54.0" velocity="3.2"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="wrist_2_link">
      <visual>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/visual/wrist2.dae"/>
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/collision/wrist2.stl"/>
        </geometry>
      </collision>
      <xacro:cylinder_inertial radius="0.075" length="0.12" mass="1.96">
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      </xacro:cylinder_inertial>
    </link>

    <joint name="wrist_3_joint" type="revolute">
      <parent link="wrist_2_link" />
      <child link = "wrist_3_link" />
      <origin xyz="0.0 0.0 0.1157" rpy="0.0 0.0 0.0" />
      <axis xyz="0 1 0" />
      <!-- <limit lower="${-2.0 * pi}" upper="${2.0 * pi}" effort="54.0" velocity="3.2"/> -->
      <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="wrist_3_link">
      <visual>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/visual/wrist3.dae"/>
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://ur_description/meshes/ur10/collision/wrist3.stl"/>
        </geometry>
      </collision>
      <xacro:cylinder_inertial radius="0.075" length="0.12" mass="0.202">
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      </xacro:cylinder_inertial>
    </link>

    <joint name="ee_fixed_joint" type="fixed">
      <parent link="wrist_3_link" />
      <child link = "ee_link" />
      <origin xyz="0.0 0.0922 0.0" rpy="0.0 0.0 ${pi/2.0}" />
    </joint>

    <link name="ee_link">
      <collision>
        <geometry>
          <box size="0.01 0.01 0.01"/>
        </geometry>
        <origin rpy="0 0 0" xyz="-0.01 0 0"/>
      </collision>
    </link>

    <joint name="ee_plate_joint" type="fixed">
      <parent link="ee_link" />
      <child link = "ee_metal_plate" />
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
    </joint>

    <link name="ee_metal_plate">
      <visual>
        <geometry>
          <box size="0.085 0.085 0.01"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <box size="0.085 0.085 0.01"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
      </collision>
    </link>

    <joint name="ee_sensor_joint" type="fixed">
      <parent link="ee_metal_plate" />
      <child link = "ee_sensor_plate" />
      <origin xyz="0.022 0.0 0.0" rpy="0.0 0.0 0.0" />
    </joint>

    <link name="ee_sensor_plate">
      <visual>
        <geometry>
          <cylinder length="0.035" radius="0.06"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
        <material name="Black">
          <color rgba="0.0 0.0 0.0 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.035" radius="0.06"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
      </collision>
    </link>

    <joint name="ee_magnet_joint" type="fixed">
      <parent link="ee_sensor_plate" />
      <child link = "ee_magnet_cylinder" />
      <origin xyz="0.042 0.0 0.0" rpy="0.0 0.0 0.0" />
    </joint>

    <link name="ee_magnet_cylinder">
      <visual>
        <geometry>
          <cylinder length="0.05" radius="0.04"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
        <material name="White">
          <color rgba="1.0 1.0 1.0 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.05" radius="0.04"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
      </collision>
    </link>
<!--
    <joint name="${prefix}fake_hand_joint" type="fixed">
      <parent link="${prefix}ee_magnet_cylinder" />
      <child link = "${prefix}fake_hand_link" />
      <origin xyz="0.05 0.0 -0.05" rpy="0.0 0.0 0.0" /> -->
      <!-- <origin xyz="0.0 0.0 0.065" rpy="0.0 0.0 0.0" /> -->
    <!-- </joint> -->

    <!-- <link name="${prefix}fake_hand_link">
      <visual>
        <geometry>
          <box size="0.35 0.05 0.05"/> -->
          <!-- <box size="0.08 0.05 0.05"/> -->
        <!-- </geometry>
        <origin rpy="0 ${pi/2.0} 0" xyz="0 0 0"/>
        <material name="HandColor">
          <color rgba="0.4 0.4 0.4 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <box size="0.35 0.05 0.05"/> -->
          <!-- <box size="0.08 0.05 0.05"/> -->
        <!-- </geometry>
        <origin rpy="0 ${pi/2.0} 0" xyz="0 0 0"/>
      </collision>
    </link> -->


    <!-- <joint name="fake_arm_joint" type="fixed">
      <parent link="ee_magnet_cylinder" />
      <child link = "fake_arm_link" />
      <origin xyz="0.05 0.0 -0.12" rpy="0.0 0.0 0.0" />
    </joint>

    <link name="fake_arm_link">
      <visual>
        <geometry>
          <cylinder length="0.25" radius="0.025"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="ArmColor">
          <color rgba="1.0 1.0 1.0 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.25" radius="0.025"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </collision>
    </link> -->

    <joint name="fake_hand_joint" type="fixed">
      <parent link="ee_magnet_cylinder" />
      <child link = "fake_hand_link" />
      <origin xyz="0.05 0.0 0.05" rpy="0.0 0.0 0.0" />
    </joint>

    <!-- <joint name="${prefix}fake_hand_joint" type="revolute">
      <parent link="${prefix}ee_magnet_cylinder" />
      <child link = "${prefix}fake_hand_link" />
      <origin xyz="0.05 0.0 0.05" rpy="0.0 0.0 0.0" />
      <axis xyz="0 0 1" />
      <limit lower="${hand_lower_limit}" upper="${hand_upper_limit}" effort="54.0" velocity="3.2"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint> -->

    <link name="fake_hand_link">
      <visual>
        <geometry>
          <!-- <box size="0.35 0.05 0.05"/> -->
          <box size="0.1 0.05 0.05"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
        <material name="HandColor">
          <color rgba="0.4 0.4 0.4 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <!-- <box size="0.35 0.05 0.05"/> -->
          <box size="0.1 0.05 0.05"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0 0 0"/>
      </collision>
    </link>


<!-- #########################ARM TEST########################## -->

<joint name="arm_base_joint" type="fixed">
  <parent link="base_link" />
  <child link = "arm_shoulder_1_link" />
  <origin xyz="-0.2 0.5 0.35" rpy="0.0 0.0 0.0" />
</joint>

<link name="arm_shoulder_1_link">
  <visual>
    <geometry>
      <box size="0.07 0.07 0.1"/>
    </geometry>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <material name="ShoulderColour">
      <color rgba="0.4 0.4 0.4 1.0"/>
    </material>
  </visual>
  <collision>
    <geometry>
      <box size="0.05 0.05 0.05"/>
    </geometry>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </collision>
</link>

<joint name="arm_shoulder_1_joint" type="revolute">
  <parent link="arm_shoulder_1_link" />
  <child link = "arm_shoulder_2_link" />
  <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
  <axis xyz="0 1 0" />
  <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
  <dynamics damping="0.0" friction="0.0"/>
</joint>

<link name="arm_shoulder_2_link">
  <visual>
    <geometry>
      <box size="0.01 0.01 0.01"/>
    </geometry>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <material name="ShoulderColour">
      <color rgba="0.4 0.4 0.4 1.0"/>
    </material>
  </visual>
  <collision>
    <geometry>
      <box size="0.01 0.01 0.01"/>
    </geometry>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </collision>
</link>

<joint name="arm_shoulder_2_joint" type="revolute">
  <parent link="arm_shoulder_2_link" />
  <child link = "arm_upper_arm_link" />
  <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
  <axis xyz="0 0 1" />
  <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
  <dynamics damping="0.0" friction="0.0"/>
</joint>

<link name="arm_upper_arm_link">
  <visual>
    <geometry>
      <cylinder length="0.3" radius="0.035"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.15 0 0"/>
    <material name="Elbow">
      <color rgba="0.2 0.2 0.2 1.0"/>
    </material>
  </visual>
  <collision>
    <geometry>
      <cylinder length="0.3" radius="0.035"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.15 0 0"/>
  </collision>
</link>

<joint name="arm_elbow_1_joint" type="revolute">
  <parent link="arm_upper_arm_link" />
  <child link = "arm_forearm_1_link" />
  <origin xyz="0.3 0.0 0.0" rpy="0.0 0.0 0.0" />
  <axis xyz="0 0 1" />
  <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
  <dynamics damping="0.0" friction="0.0"/>
</joint>

<link name="arm_forearm_1_link">
  <visual>
    <geometry>
      <box size="0.01 0.01 0.01"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.0 0.0 0.0"/>
    <material name="FA">
      <color rgba="0.0 0.0 0.0 1.0"/>
    </material>
  </visual>
  <collision>
    <geometry>
      <box size="0.01 0.01 0.01"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.0 0.0 0.0"/>
  </collision>
  <!-- <inertial>
    <mass value="1.80"/>
    <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
  </inertial> -->
</link>

<joint name="arm_elbow_2_joint" type="revolute">
  <parent link="arm_forearm_1_link" />
  <child link = "arm_forearm_2_link" />
  <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
  <axis xyz="0 1 0" />
  <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
  <dynamics damping="0.0" friction="0.0"/>
</joint>

<link name="arm_forearm_2_link">
  <visual>
    <geometry>
      <cylinder length="0.25" radius="0.025"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.125 0.0 0.0"/>
    <material name="FA">
      <color rgba="0.0 0.0 0.0 1.0"/>
    </material>
  </visual>
  <collision>
    <geometry>
      <cylinder length="0.25" radius="0.025"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.125 0.0 0.0"/>
  </collision>
  <!-- <inertial>
    <mass value="1.80"/>
    <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
  </inertial> -->
</link>

<joint name="arm_ee_joint" type="fixed">
  <parent link="arm_forearm_2_link" />
  <child link = "arm_ee_link" />
  <origin xyz="0.25 0.0 0.0" rpy="0.0 0.0 0.0" />
  <!-- <axis xyz="0 1 0" /> -->
  <!-- <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/> -->
  <!-- <dynamics damping="0.0" friction="0.0"/> -->
</joint>

<link name="arm_ee_link">
  <visual>
    <geometry>
      <box size="0.05 0.05 0.05"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.0 0.0 0.0"/>
    <material name="FAee">
      <color rgba="0.0 0.0 1.0 1.0"/>
    </material>
  </visual>
  <collision>
    <geometry>
      <box size="0.05 0.05 0.05"/>
    </geometry>
    <origin rpy="0 1.570796 0" xyz="0.0 0.0 0.0"/>
  </collision>
  <!-- <inertial>
    <mass value="1.80"/>
    <inertia ixx="0.4" ixy="0.0" ixz="0.0" iyy="0.4" iyz="0.0" izz="0.2"/>
    <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
  </inertial> -->
</link>


<!-- <joint name="arm_common_joint" type="revolute">
  <parent link="fake_hand_link" />
  <child link = "arm_forearm_2_link" />
  <origin xyz="0 0.0 0.0" rpy="0.0 0.0 0.0" />
  <axis xyz="0 0 1" />
  <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
  <dynamics damping="0.0" friction="0.0"/>
</joint> -->
<!--
<joint name="arm_common_joint" type="fixed">
  <parent link="arm_forearm_2_link" />
  <child link = "fake_hand_link" />
  <origin xyz="0.3 0.0 0.0" rpy="0.0 0.0 0.0" />
  <axis xyz="0 0 1" />
  <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
  <dynamics damping="0.0" friction="0.0"/>
</joint> -->

<!-- ##################### -->
<!-- <joint name="${prefix}fake_forearm_joint" type="fixed">
  <parent link="${prefix}fake_arm_link" />
  <child link = "${prefix}fake_forearm_link" />
  <origin xyz="0.0 0.0 -0.25" rpy="0.0 0.0 0.0" />
</joint> -->

<!-- <joint name="${prefix}fake_forearm_joint" type="revolute">
  <parent link="${prefix}fake_hand_link" />
  <child link = "${prefix}fake_forearm_link" />
  <origin xyz="0.0 0.0 -0.25" rpy="0.0 0.0 0.0" />
  <axis xyz="0 0 1" />
  <limit lower="${forearm_lower_limit}" upper="${forearm_upper_limit}" effort="54.0" velocity="3.2"/>
  <dynamics damping="0.0" friction="0.0"/>
</joint>

    <link name="${prefix}fake_forearm_link">
      <visual>
        <geometry>
          <cylinder length="0.25" radius="0.025"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="ForearmColor">
          <color rgba="0.0 0.0 0.0 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.25" radius="0.025"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </collision>
    </link>

    <joint name="${prefix}fake_shoulder_joint" type="fixed">
      <parent link="${prefix}base_link" />
      <child link = "${prefix}fake_forearm_link" />
      <origin xyz="0.0 0.0 -0.25" rpy="0.0 0.0 0.0" />
    </joint> -->
<!--
    <link name="${prefix}fake_base_link">
      <visual>
        <geometry>
          <box size="0.1 0.1 0.1"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="BaseColor">
          <color rgba="0.0 0.0 1.0 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <box size="0.1 0.1 0.1"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </collision>
    </link> -->

<!-- ################### -->

    <!-- <joint name="arm_shoulder_joint" type="fixed">
      <parent link="base_link" />
      <child link = "arm_shoulder_link" />
      <origin xyz="-0.15 0.5 0.4" rpy="0.0 0.0 0.0" />
    </joint>

    <link name="arm_shoulder_link">
      <visual>
        <geometry>
          <box size="0.07 0.07 0.1"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
        <material name="ShoulderColour">
          <color rgba="0.4 0.4 0.4 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <box size="0.05 0.05 0.05"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0"/>
      </collision>
    </link>

    <joint name="arm_elbow_joint" type="revolute">
      <parent link="arm_shoulder_link" />
      <child link = "arm_elbow_link" />
      <origin xyz="0.0 0.0 0.0" rpy="0.0 0.0 0.0" />
      <axis xyz="0 0 1" />
      <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="arm_elbow_link">
      <visual>
        <geometry>
          <cylinder length="0.3" radius="0.035"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0.15 0 0"/>
        <material name="Elbow">
          <color rgba="0.0 1.0 0.0 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.3" radius="0.035"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0.15 0 0"/>
      </collision>
    </link>

    <joint name="arm_forearm_joint" type="revolute">
      <parent link="arm_elbow_link" />
      <child link = "arm_forearm_link" />
      <origin xyz="0.15 0.0 0.0" rpy="0.0 0.0 0.0" />
      <axis xyz="0 0 1" />
      <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint>

    <link name="arm_forearm_link">
      <visual>
        <geometry>
          <cylinder length="0.25" radius="0.025"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0.25 0.0 0.0"/>
        <material name="FA">
          <color rgba="0.0 0.0 0.0 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <cylinder length="0.25" radius="0.025"/>
        </geometry>
        <origin rpy="0 1.570796 0" xyz="0.25 0.0 0.0"/>
      </collision>
    </link>

    <joint name="arm_wrist_joint" type="revolute">
      <parent link="arm_forearm_link" />
      <child link = "fake_arm_link" />
      <origin xyz="0.15 0.0 0.0" rpy="0.0 0.0 0.0" />
      <axis xyz="0 0 1" />
      <limit lower="-3.14159265" upper="3.14159265" effort="54.0" velocity="3.2"/>
      <dynamics damping="0.0" friction="0.0"/>
    </joint> -->

    <!-- <xacro:ur_arm_transmission prefix="${prefix}" />
    <xacro:ur_arm_gazebo prefix="${prefix}" /> -->

    <!-- ROS base_link to UR 'Base' Coordinates transform -->
    <link name="base"/>
    <joint name="base_link-base_fixed_joint" type="fixed">
      <!-- NOTE: this rotation is only needed as long as base_link itself is
                 not corrected wrt the real robot (ie: rotated over 180
                 degrees)
      -->
      <origin xyz="0 0 0" rpy="0 0 ${-pi}"/>
      <parent link="base_link"/>
      <child link="base"/>
    </joint>


    <!-- Frame coincident with all-zeros TCP on UR controller -->
    <!-- <link name="${prefix}tool0"/>
    <joint name="${prefix}wrist_3_link-tool0_fixed_joint" type="fixed">
      <origin xyz="0 0.0922 0" rpy="${pi/-2.0} 0 0"/>
      <parent link="${prefix}wrist_3_link"/>
      <child link="${prefix}tool0"/>
    </joint> -->

  </xacro:macro>
</robot>
